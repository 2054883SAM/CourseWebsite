(()=>{var e={};e.id=8794,e.ids=[8794],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9505:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(60687),a=t(43210),o=t(23245),i=t(30474),n=t(85814),l=t.n(n);function d({viewMode:e,course:r={id:"demo-course",title:"Introduction \xe0 React et Next.js",description:"Apprenez les fondamentaux de React et Next.js pour d\xe9velopper des applications web modernes et performantes.",thumbnail_url:"/images/placeholders/course-thumbnail.jpg",creator_id:"demo",created_at:"2025-06-01",progress:35,lastAccessedAt:"2025-07-20",enrollment:{id:"demo-enrollment",status:"active",enrolled_at:"2025-06-10"}}}){let t=r.lastAccessedAt?new Date(r.lastAccessedAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):null,a=r.thumbnail_url||"/images/placeholders/course-thumbnail.jpg",o=`/my-learning/${r.id}`;return"grid"===e?(0,s.jsxs)("div",{className:"group flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-all duration-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800",children:[(0,s.jsxs)(l(),{href:o,className:"aspect-video relative overflow-hidden",children:[(0,s.jsx)(i.default,{src:a,alt:r.title,fill:!0,className:"object-cover transition-all duration-300 group-hover:scale-105"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:(0,s.jsx)("div",{className:"rounded-full bg-white/80 p-3 shadow-lg backdrop-blur-sm transition-transform duration-300 group-hover:scale-110 dark:bg-black/50",children:(0,s.jsxs)("svg",{className:"h-8 w-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})})]}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col p-4",children:[(0,s.jsx)(l(),{href:o,children:(0,s.jsx)("h3",{className:"line-clamp-2 font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300",children:r.title})}),(0,s.jsx)("p",{className:"mt-2 line-clamp-2 text-sm text-gray-500 dark:text-gray-400",children:r.description}),(0,s.jsx)("div",{className:"mt-4 flex items-center",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-green-500",style:{width:`${r.progress}%`}})}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[r.progress,"% termin\xe9"]})]})}),t&&(0,s.jsxs)("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:["Dernier acc\xe8s le ",t]})]})]}):(0,s.jsxs)("div",{className:"group flex overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-all duration-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800",children:[(0,s.jsxs)(l(),{href:o,className:"relative h-auto w-48 overflow-hidden",children:[(0,s.jsx)(i.default,{src:a,alt:r.title,fill:!0,className:"object-cover transition-all duration-300 group-hover:scale-105"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:(0,s.jsx)("div",{className:"rounded-full bg-white/80 p-2 shadow-lg backdrop-blur-sm transition-transform duration-300 group-hover:scale-110 dark:bg-black/50",children:(0,s.jsxs)("svg",{className:"h-6 w-6 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})})]}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col justify-between p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l(),{href:o,children:(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300",children:r.title})}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:r.description})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-green-500",style:{width:`${r.progress}%`}})}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[r.progress,"% termin\xe9"]})]}),t&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Dernier acc\xe8s le ",t]})]})})]})]})}function c(){return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed border-gray-300 bg-gray-50 p-12 text-center dark:border-gray-700 dark:bg-gray-800/50",children:(0,s.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,s.jsx)("div",{className:"relative mx-auto h-52 w-52",children:(0,s.jsx)(i.default,{src:"/images/placeholders/empty-courses.svg",alt:"Aucun cours",fill:!0,className:"object-contain"})}),(0,s.jsx)("h3",{className:"mt-4 text-xl font-medium text-gray-900 dark:text-white",children:"Aucune formation inscrite"}),(0,s.jsx)("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Vous n'\xeates inscrit \xe0 aucune formation pour le moment. D\xe9couvrez notre catalogue et commencez votre parcours d'apprentissage d\xe8s aujourd'hui !"}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(l(),{href:"/courses",className:"inline-flex items-center justify-center rounded-full bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-3 text-sm font-semibold text-white transition-all duration-300 hover:from-blue-700 hover:to-purple-700 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Explorer les formations"})})]})})}function u({viewMode:e}){let r=Array(6).fill(null);return(0,s.jsx)("div",{className:`
        ${"grid"===e?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"flex flex-col space-y-4"}
      `,children:r.map((r,t)=>"grid"===e?(0,s.jsxs)("div",{className:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800",children:[(0,s.jsx)("div",{className:"aspect-video w-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)("div",{className:"h-6 w-3/4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 w-2/3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)("div",{className:"h-2 w-full bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})}),(0,s.jsx)("div",{className:"h-3 w-1/3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]},t):(0,s.jsxs)("div",{className:"flex overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800",children:[(0,s.jsx)("div",{className:"w-48 bg-gray-200 dark:bg-gray-700 animate-pulse"}),(0,s.jsxs)("div",{className:"flex-1 p-4 space-y-3",children:[(0,s.jsx)("div",{className:"h-6 w-1/2 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)("div",{className:"h-2 w-full bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"h-3 w-1/3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-3 w-1/4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]})]},t))})}let m=a.forwardRef(function({title:e,titleId:r,...t},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}),p=a.forwardRef(function({title:e,titleId:r,...t},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"}))});function g({currentView:e,onViewChange:r}){return(0,s.jsxs)("div",{className:"inline-flex items-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-sm",children:[(0,s.jsx)("button",{type:"button",className:`p-2 ${"grid"===e?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-gray-500 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,onClick:()=>r("grid"),"aria-label":"Vue en grille","aria-pressed":"grid"===e,children:(0,s.jsx)(m,{className:"h-5 w-5"})}),(0,s.jsx)("button",{type:"button",className:`p-2 ${"list"===e?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-gray-500 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,onClick:()=>r("list"),"aria-label":"Vue en liste","aria-pressed":"list"===e,children:(0,s.jsx)(p,{className:"h-5 w-5"})})]})}var h=t(86082),x=t(98294);function b(){let[e,r]=(0,a.useState)("grid"),{user:t,dbUser:i}=(0,h.As)(),{courses:n,isLoading:l,error:m,totalCount:p,setParams:b,refetch:f}=function(e={}){let{user:r}=(0,h.As)(),[t,s]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0),[n,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(0),[u,m]=(0,a.useState)(e);return{courses:t,isLoading:o,error:n,totalCount:d,refetch:async()=>{if(!r?.id){i(!1),l("User not authenticated");return}i(!0),l(null);try{console.log(`useEnrolledCourses: Fetching for user ${r.id} with params:`,u);let{data:e,error:t,count:a}=await (0,x.e)(r.id,u);t?(console.error("useEnrolledCourses: Error fetching courses:",t),l(t)):(console.log(`useEnrolledCourses: Fetched ${e.length} courses`),s(e),c(a))}catch(e){console.error("useEnrolledCourses: Exception during fetch:",e),l(e.message||"Failed to fetch enrolled courses")}finally{i(!1)}},setParams:e=>{console.log("useEnrolledCourses: Updating params:",e),m(r=>({...r,...e}))}}}({limit:10,sortBy:"enrolledAt",sortOrder:"desc"});return(0,s.jsx)("main",{className:"py-8",children:(0,s.jsx)(o.m,{children:(0,s.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Mes formations",!l&&p>0&&(0,s.jsxs)("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400 font-normal",children:["(",p,")"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>f(),className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Actualiser"}),(0,s.jsx)(g,{currentView:e,onViewChange:r})]})]}),m&&(0,s.jsx)("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-4 border border-red-200 dark:border-red-800",children:(0,s.jsxs)("p",{className:"text-red-700 dark:text-red-400",children:["Erreur: ",m]})}),l?(0,s.jsx)(u,{viewMode:e}):0===n.length?(0,s.jsx)(c,{}):(0,s.jsx)("div",{className:`
              ${"grid"===e?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"flex flex-col space-y-4"}
            `,children:n.map(r=>(0,s.jsx)(d,{viewMode:e,course:r},r.id))})]})})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},40598:(e,r,t)=>{Promise.resolve().then(t.bind(t,64626))},40700:(e,r,t)=>{"use strict";t.d(r,{r:()=>n});var s=t(60687),a=t(86082);let o=()=>(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary-600 border-t-transparent"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),i=()=>(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"mb-4 text-2xl font-bold",children:"Access Denied"}),(0,s.jsx)("p",{className:"mb-6 text-gray-600",children:"You need to be signed in to access this page."}),(0,s.jsx)("a",{href:"/signin",className:"inline-flex h-10 items-center justify-center rounded-md bg-primary-600 px-4 font-medium text-white transition-colors hover:bg-primary-700",children:"Sign In"})]})});function n(e,{requiredRole:r,requireAuth:t=!0,loadingComponent:l=(0,s.jsx)(o,{}),unauthorizedComponent:d=(0,s.jsx)(i,{})}={}){return function(o){let{user:i,loading:n,checkPermission:c}=(0,a.As)();return n?l:t&&!i||r&&!c(r)?d:(0,s.jsx)(e,{...o})}}},46055:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},54037:(e,r,t)=>{Promise.resolve().then(t.bind(t,61545))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57958:(e,r,t)=>{"use strict";function s(e){return{id:e.id,title:e.title,startTime:e.start_time,duration:e.duration,description:e.description,thumbnail:e.thumbnail_url}}function a(e){return!!e&&"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.title&&"number"==typeof e.start_time&&(void 0===e.duration||"number"==typeof e.duration)&&(void 0===e.description||"string"==typeof e.description)&&(void 0===e.thumbnail_url||"string"==typeof e.thumbnail_url)}function o(e){return!!e&&"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.title&&"number"==typeof e.startTime&&(void 0===e.duration||"number"==typeof e.duration)&&(void 0===e.description||"string"==typeof e.description)&&(void 0===e.thumbnail||"string"==typeof e.thumbnail)&&(void 0===e.flashcard||"boolean"==typeof e.flashcard)}function i(e){try{let r=e;if("string"==typeof r&&(r=JSON.parse(r)),!Array.isArray(r))return[];if(r.every(o))return r;if(r.every(a))return r.map(s);let t=[];for(let e of r)o(e)?t.push(e):a(e)&&t.push(s(e));return t}catch(e){return[]}}t.d(r,{UQ:()=>i})},61545:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Konan\\\\Documents\\\\MONSPACE\\\\CourseWebsite-1\\\\app\\\\my-learning\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\my-learning\\page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64158:(e,r,t)=>{Promise.resolve().then(t.bind(t,74352))},64626:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Konan\\\\Documents\\\\MONSPACE\\\\CourseWebsite-1\\\\app\\\\my-learning\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\my-learning\\layout.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},74352:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(60687),a=t(86082),o=t(40700),i=t(95057),n=t(16189);t(43210);let l=(0,o.r)(function({children:e}){let{user:r,loading:t}=(0,a.As)();return((0,n.useRouter)(),t)?(0,s.jsx)("div",{className:"flex min-h-[50vh] items-center justify-center",children:(0,s.jsx)(i.k,{size:"large"})}):r?(0,s.jsx)(s.Fragment,{children:e}):null},{requireAuth:!0})},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91326:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=t(65239),a=t(48088),o=t(88170),i=t.n(o),n=t(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d={children:["",{children:["my-learning",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,61545)),"C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\my-learning\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,64626)),"C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\my-learning\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\my-learning\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/my-learning/page",pathname:"/my-learning",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95057:(e,r,t)=>{"use strict";t.d(r,{k:()=>a});var s=t(60687);function a({size:e="medium",color:r="blue"}){return(0,s.jsx)("div",{className:`
        ${{small:"h-4 w-4 border-2",medium:"h-8 w-8 border-2",large:"h-12 w-12 border-3"}[e]}
        ${{blue:"border-blue-200 border-t-blue-600",white:"border-gray-200/30 border-t-white"}[r]}
        animate-spin rounded-full border-solid
      `,role:"status","aria-label":"Chargement",children:(0,s.jsx)("span",{className:"sr-only",children:"Chargement..."})})}},95893:(e,r,t)=>{Promise.resolve().then(t.bind(t,9505))},98294:(e,r,t)=>{"use strict";t.d(r,{d:()=>i,e:()=>o});var s=t(29605),a=t(57958);async function o(e,r={}){if(!e)return console.log("No user ID provided"),{data:[],error:"User not authenticated",count:0};try{console.log(`Fetching enrollments for user: ${e}`);let t=(0,s.createBrowserClient)("https://qrowzznnnarfogfbnnow.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI"),{limit:a=50,offset:o=0,sortBy:i="enrolledAt",sortOrder:n="desc",status:l="all"}=r;console.log(`Query params: limit=${a}, offset=${o}, sortBy=${i}, sortOrder=${n}, status=${l}`);let d=t.from("enrollments").select(`
        id,
        status,
        enrolled_at,
        course:course_id (
          id,
          title,
          description,
          thumbnail_url,
          created_at,
          creator_id,
          playback_id
        )
        `,{count:"exact"}).eq("user_id",e);"all"!==l&&(d=d.eq("status",l));let{data:c,error:u,count:m}=await d.order("title"===i?"course.title":"enrolled_at",{ascending:"asc"===n}).range(o,o+a-1);if(u)return console.error("Supabase error:",u),{data:[],error:u.message,count:0};if(!c?.length)return console.log("No enrollments found for user:",e),{data:[],error:null,count:m??0};let p={};try{let r=c.map(e=>Array.isArray(e.course)?e.course[0]?.id:e.course?.id).filter(Boolean);if(r.length>0){let{data:s,error:a}=await t.from("courses_progress").select("course_id, progress, updated_at").eq("user_id",e).in("course_id",r);!a&&s&&(p=s.reduce((e,r)=>(e[r.course_id]={progress:Number(r.progress??0),updated_at:r.updated_at},e),{}))}}catch(e){console.warn("Could not fetch persistent course progress:",e)}let g=c.map(e=>{let r={id:e.id,status:e.status,enrolled_at:e.enrolled_at},t=Array.isArray(e.course)?e.course[0]:e.course,s={id:t.id,title:t.title,description:t.description,thumbnail_url:t.thumbnail_url,created_at:t.created_at,creator_id:t.creator_id,playback_id:t.playback_id},a=p[s.id]?.progress??0,o=p[s.id]?.updated_at;return 0===a,{id:s.id,title:s.title,description:s.description,thumbnail_url:s.thumbnail_url,created_at:s.created_at,creator_id:s.creator_id,progress:a,lastAccessedAt:o,playbackId:s.playback_id,enrollment:r}});return console.log(`Returning ${g.length} enrolled course(s)`),{data:g,error:null,count:m??0}}catch(e){return console.error("Failed to get enrolled courses:",e),{data:[],error:"Failed to fetch enrolled courses",count:0}}}async function i(e,r){if(!e)return console.log("No user ID provided"),{data:null,error:"User not authenticated"};if(!r)return console.log("No course ID provided"),{data:null,error:"Course ID is required"};try{let t;console.log(`Fetching enrollment for user: ${e} and course: ${r}`);let o=(0,s.createBrowserClient)("https://qrowzznnnarfogfbnnow.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI"),{data:i,error:n}=await o.from("enrollments").select(`
        id,
        status,
        enrolled_at,
        course:course_id (
          id,
          title,
          description,
          thumbnail_url,
          created_at,
          creator_id,
          playback_id,
          chapters
        )
      `).eq("user_id",e).eq("course_id",r).eq("status","active").single();if(n)return console.error("Supabase error:",n),{data:null,error:n.message};if(!i)return console.log("No enrollment found for user:",e,"and course:",r),{data:null,error:"Not enrolled in this course"};let l=Array.isArray(i.course)?i.course[0]:i.course,d=0;try{let{data:r,error:s}=await o.from("courses_progress").select("progress, updated_at").eq("user_id",e).eq("course_id",l.id).maybeSingle();!s&&r&&(d=Number(r.progress??0),t=r.updated_at??void 0)}catch(e){console.warn("Could not fetch persisted progress:",e)}let c=new Date().toISOString();return{data:{id:l.id,title:l.title,description:l.description,thumbnail_url:l.thumbnail_url,created_at:l.created_at,creator_id:l.creator_id,progress:d,lastAccessedAt:t??c,chapters:(0,a.UQ)(l.chapters),enrollment:{id:i.id,status:i.status,enrolled_at:i.enrolled_at},playbackId:l.playback_id},error:null}}catch(e){return console.error("Failed to get enrolled course:",e),{data:null,error:"Failed to fetch enrolled course"}}}}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,9278,1658,9605,9679],()=>t(91326));module.exports=s})();