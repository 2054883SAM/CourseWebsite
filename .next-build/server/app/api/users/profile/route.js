(()=>{var e={};e.id=7260,e.ids=[7260],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16800:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>C,routeModule:()=>I,serverHooks:()=>b,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>k});var o={};r.r(o),r.d(o,{GET:()=>f,PUT:()=>g});var s=r(96559),i=r(48088),n=r(37719),a=r(34386);async function u(e){console.log("API Auth: Validating authentication using createServerClient"),console.log("API Auth: Available cookies:",Array.from(e.cookies.getAll()).map(e=>e.name));try{let t=(0,a.createServerClient)("https://qrowzznnnarfogfbnnow.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",{cookies:{get(t){let r=e.cookies.get(t);return console.log(`API Auth: Getting cookie ${t}:`,r?"Found":"Not found"),r?.value},set(){},remove(){}}}),{data:{user:r},error:o}=await t.auth.getUser();if(o)throw console.error("User fetch error:",o),Error("Error getting user: "+o.message);if(!r){console.log("API Auth: No session found in Supabase client, checking for supabase.auth.token cookie");let r=e.cookies.get("supabase.auth.token");if(r){console.log("API Auth: Found supabase.auth.token cookie");try{let e=r.value;try{let r=JSON.parse(e);if(console.log("API Auth: Parsed supabase.auth.token as JSON"),r.access_token){console.log("API Auth: Found access_token in cookie data");let{data:{session:e},error:o}=await t.auth.setSession({access_token:r.access_token,refresh_token:r.refresh_token||""});if(o&&console.error("API Auth: Error setting session from cookie token:",o),e)return console.log("API Auth: Successfully created session from cookie token"),{userId:e.user.id,role:e.user.app_metadata?.role||await l(e.user.id)};return await c(r.access_token)}console.log("API Auth: No access_token found in cookie JSON data")}catch(t){return console.log("API Auth: Could not parse as JSON, trying as raw token"),await c(e)}}catch(e){console.error("API Auth: Error processing supabase.auth.token cookie:",e)}}else console.log("API Auth: supabase.auth.token cookie not found or empty");let o=e.headers.get("authorization");if(o&&o.startsWith("Bearer ")){let e=o.substring(7);console.log("API Auth: Using authorization header as fallback");try{return await c(e)}catch(e){console.error("Error validating auth header token:",e)}}let s=e.headers.get("x-auth-token");if(s){console.log("API Auth: Using x-auth-token header as fallback");try{return await c(s)}catch(e){console.error("Error validating custom token:",e)}}throw Error("No auth token found")}console.log("API Auth: Authenticated user ID:",r.id);let s=r.id;if(!s)throw Error("User ID not found in session");return{userId:s,role:r.app_metadata?.role||await l(s)}}catch(e){throw console.error("Authentication error:",e),Error("Authentication failed: "+(e instanceof Error?e.message:String(e)))}}async function l(e){console.log("API Auth: Fetching role for user ID:",e);try{let t=await fetch(`https://qrowzznnnarfogfbnnow.supabase.co/rest/v1/users?select=role&id=eq.${e}`,{headers:{Authorization:`Bearer ${process.env.SUPABASE_SERVICE_ROLE_KEY}`,apikey:process.env.SUPABASE_SERVICE_ROLE_KEY,"Content-Type":"application/json"}});if(!t.ok)throw Error(`Failed to fetch user data: ${t.status}`);let r=await t.json();if(!r||0===r.length)throw Error("User not found in database");let o=r[0].role;return console.log("API Auth: User role found:",o),o}catch(e){throw console.error("Error fetching user role:",e),Error("Failed to determine user role")}}async function c(e){try{if(console.log("API Auth: Validating token manually"),e.startsWith("{")&&e.endsWith("}"))try{console.log("API Auth: Token appears to be JSON, attempting to parse");let t=JSON.parse(e);t.access_token?(console.log("API Auth: Found access_token in JSON, using that"),e=t.access_token):t.token&&(console.log("API Auth: Found token field in JSON, using that"),e=t.token)}catch(e){console.log("API Auth: Failed to parse token as JSON")}if(-1===e.indexOf("."))throw console.error("Token appears to be a code verifier, not a JWT"),Error("Invalid token format - not a JWT");let t=e.split(".");if(3!==t.length)throw console.error("Token does not have 3 parts:",t.length),Error("Invalid token format - wrong number of segments");let r=JSON.parse(Buffer.from(t[1],"base64").toString()).sub;if(!r)throw Error("No user ID in token");console.log("User ID from authorization header token:",r);let o=await fetch(`https://qrowzznnnarfogfbnnow.supabase.co/rest/v1/users?select=role&id=eq.${r}`,{headers:{Authorization:`Bearer ${process.env.SUPABASE_SERVICE_ROLE_KEY}`,apikey:process.env.SUPABASE_SERVICE_ROLE_KEY,"Content-Type":"application/json"}});if(!o.ok)throw Error("Failed to fetch user data");let s=await o.json();if(!s||0===s.length)throw Error("User not found in database");let i=s[0].role;return console.log("User role found:",i),{userId:r,role:i}}catch(e){throw console.error("Error validating token:",e),Error("Invalid authentication token")}}var p=r(61223),h=r(44999),d=r(32190);async function f(e){try{let t=await u(e),r=(0,p.createRouteHandlerClient)({cookies:h.UL}),{data:o,error:s}=await r.from("users").select("*").eq("id",t.userId).single();if(s)return console.error("Error fetching user profile:",s),d.NextResponse.json({error:"Failed to fetch user profile"},{status:500});return d.NextResponse.json(o)}catch(e){return console.error("Error in GET /api/users/profile:",e),d.NextResponse.json({error:e instanceof Error?e.message:"Unauthorized"},{status:401})}}async function g(e){try{let t=await u(e),r=(0,p.createRouteHandlerClient)({cookies:h.UL}),{name:o,photo_url:s}=await e.json();if(!o&&!s)return d.NextResponse.json({error:"Invalid profile data"},{status:400});let i={};o&&(i.name=o),s&&(i.photo_url=s);let{data:n,error:a}=await r.from("users").update(i).eq("id",t.userId).select().single();if(a)return console.error("Error updating user profile:",a),d.NextResponse.json({error:"Failed to update user profile"},{status:500});return d.NextResponse.json(n)}catch(e){return console.error("Error in PUT /api/users/profile:",e),d.NextResponse.json({error:e instanceof Error?e.message:"Unauthorized"},{status:401})}}let I=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/users/profile/route",pathname:"/api/users/profile",filename:"route",bundlePath:"app/api/users/profile/route"},resolvedPagePath:"C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\api\\users\\profile\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:m,workUnitAsyncStorage:k,serverHooks:b}=I;function C(){return(0,n.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:k})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},61223:(e,t,r)=>{"use strict";var o,s=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(u,{createBrowserSupabaseClient:()=>N,createClientComponentClient:()=>c,createMiddlewareClient:()=>b,createMiddlewareSupabaseClient:()=>E,createPagesBrowserClient:()=>p,createPagesServerClient:()=>g,createRouteHandlerClient:()=>A,createServerActionClient:()=>O,createServerComponentClient:()=>y,createServerSupabaseClient:()=>_}),e.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of n(t))a.call(e,r)||void 0===r||s(e,r,{get:()=>t[r],enumerable:!(o=i(t,r))||o.enumerable});return e})(s({},"__esModule",{value:!0}),u);var l=r(74772);function c({supabaseUrl:e="https://qrowzznnnarfogfbnnow.supabase.co",supabaseKey:t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",options:r,cookieOptions:s,isSingleton:i=!0}={}){if(!e||!t)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");let n=()=>{var o;return(0,l.createSupabaseClient)(e,t,{...r,global:{...null==r?void 0:r.global,headers:{...null==(o=null==r?void 0:r.global)?void 0:o.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.9.0"}},auth:{storage:new l.BrowserCookieAuthStorageAdapter(s)}})};if(i){let e=o??n();return"undefined"==typeof window?e:(o||(o=e),o)}return n()}var p=c,h=r(74772),d=r(83110),f=class extends h.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t,r,o;return(0,d.splitCookiesString)((null==(r=null==(t=this.context.res)?void 0:t.getHeader("set-cookie"))?void 0:r.toString())??"").map(t=>(0,h.parseCookies)(t)[e]).find(e=>!!e)??(null==(o=this.context.req)?void 0:o.cookies[e])}setCookie(e,t){this._setCookie(e,t)}deleteCookie(e){this._setCookie(e,"",{maxAge:0})}_setCookie(e,t,r){var o;let s=(0,d.splitCookiesString)((null==(o=this.context.res.getHeader("set-cookie"))?void 0:o.toString())??"").filter(t=>!(e in(0,h.parseCookies)(t))),i=(0,h.serializeCookie)(e,t,{...this.cookieOptions,...r,httpOnly:!1});this.context.res.setHeader("set-cookie",[...s,i])}};function g(e,{supabaseUrl:t="https://qrowzznnnarfogfbnnow.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",options:o,cookieOptions:s}={}){var i;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,h.createSupabaseClient)(t,r,{...o,global:{...null==o?void 0:o.global,headers:{...null==(i=null==o?void 0:o.global)?void 0:i.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.9.0"}},auth:{storage:new f(e,s)}})}var I=r(74772),m=r(83110),k=class extends I.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t;let r=(0,m.splitCookiesString)((null==(t=this.context.res.headers.get("set-cookie"))?void 0:t.toString())??"").map(t=>(0,I.parseCookies)(t)[e]).find(e=>!!e);return r||(0,I.parseCookies)(this.context.req.headers.get("cookie")??"")[e]}setCookie(e,t){this._setCookie(e,t)}deleteCookie(e){this._setCookie(e,"",{maxAge:0})}_setCookie(e,t,r){let o=(0,I.serializeCookie)(e,t,{...this.cookieOptions,...r,httpOnly:!1});this.context.res.headers&&this.context.res.headers.append("set-cookie",o)}};function b(e,{supabaseUrl:t="https://qrowzznnnarfogfbnnow.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",options:o,cookieOptions:s}={}){var i;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,I.createSupabaseClient)(t,r,{...o,global:{...null==o?void 0:o.global,headers:{...null==(i=null==o?void 0:o.global)?void 0:i.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.9.0"}},auth:{storage:new k(e,s)}})}var C=r(74772),v=class extends C.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e,this.isServer=!0}getCookie(e){var t;return null==(t=this.context.cookies().get(e))?void 0:t.value}setCookie(e,t){}deleteCookie(e){}};function y(e,{supabaseUrl:t="https://qrowzznnnarfogfbnnow.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",options:o,cookieOptions:s}={}){var i;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,C.createSupabaseClient)(t,r,{...o,global:{...null==o?void 0:o.global,headers:{...null==(i=null==o?void 0:o.global)?void 0:i.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.9.0"}},auth:{storage:new v(e,s)}})}var S=r(74772),w=class extends S.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t;return null==(t=this.context.cookies().get(e))?void 0:t.value}setCookie(e,t){this.context.cookies().set(e,t,this.cookieOptions)}deleteCookie(e){this.context.cookies().set(e,"",{...this.cookieOptions,maxAge:0})}};function A(e,{supabaseUrl:t="https://qrowzznnnarfogfbnnow.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",options:o,cookieOptions:s}={}){var i;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,S.createSupabaseClient)(t,r,{...o,global:{...null==o?void 0:o.global,headers:{...null==(i=null==o?void 0:o.global)?void 0:i.headers,"X-Client-Info":"@supabase/auth-helpers-nextjs@0.9.0"}},auth:{storage:new w(e,s)}})}var O=A;function N({supabaseUrl:e="https://qrowzznnnarfogfbnnow.supabase.co",supabaseKey:t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",options:r,cookieOptions:o}={}){return console.warn("Please utilize the `createPagesBrowserClient` function instead of the deprecated `createBrowserSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),p({supabaseUrl:e,supabaseKey:t,options:r,cookieOptions:o})}function _(e,{supabaseUrl:t="https://qrowzznnnarfogfbnnow.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",options:o,cookieOptions:s}={}){return console.warn("Please utilize the `createPagesServerClient` function instead of the deprecated `createServerSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),g(e,{supabaseUrl:t,supabaseKey:r,options:o,cookieOptions:s})}function E(e,{supabaseUrl:t="https://qrowzznnnarfogfbnnow.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI",options:o,cookieOptions:s}={}){return console.warn("Please utilize the `createMiddlewareClient` function instead of the deprecated `createMiddlewareSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs#middleware"),b(e,{supabaseUrl:t,supabaseKey:r,options:o,cookieOptions:s})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},74772:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BrowserCookieAuthStorageAdapter:()=>w,CookieAuthStorageAdapter:()=>S,DEFAULT_COOKIE_OPTIONS:()=>v,createSupabaseClient:()=>A,isBrowser:()=>C,parseCookies:()=>O,parseSupabaseCookie:()=>k,serializeCookie:()=>N,stringifySupabaseSession:()=>b});var o=r(79428);new TextEncoder;let s=new TextDecoder;o.Buffer.isEncoding("base64url");let i=e=>o.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=s.decode(t)),t}(e),"base64");var n=r(30645),a=Object.create,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,p=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,d=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of c(t))h.call(e,s)||s===r||u(e,s,{get:()=>t[s],enumerable:!(o=l(t,s))||o.enumerable});return e},f=(e,t,r)=>(r=null!=e?a(p(e)):{},d(!t&&e&&e.__esModule?r:u(r,"default",{value:e,enumerable:!0}),e)),g=((e,t)=>function(){return t||(0,e[c(e)[0]])((t={exports:{}}).exports,t),t.exports})({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(e){e.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},s=(t||{}).decode||o,i=0;i<e.length;){var n=e.indexOf("=",i);if(-1===n)break;var a=e.indexOf(";",i);if(-1===a)a=e.length;else if(a<n){i=e.lastIndexOf(";",n-1)+1;continue}var u=e.slice(i,n).trim();if(void 0===r[u]){var l=e.slice(n+1,a).trim();34===l.charCodeAt(0)&&(l=l.slice(1,-1)),r[u]=function(e,t){try{return t(e)}catch(t){return e}}(l,s)}i=a+1}return r},e.serialize=function(e,o,i){var n=i||{},a=n.encode||s;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!r.test(e))throw TypeError("argument name is invalid");var u=a(o);if(u&&!r.test(u))throw TypeError("argument val is invalid");var l=e+"="+u;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(n.domain){if(!r.test(n.domain))throw TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!r.test(n.path))throw TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){var p,h=n.expires;if(p=h,"[object Date]"!==t.call(p)&&!(p instanceof Date)||isNaN(h.valueOf()))throw TypeError("option expires is invalid");l+="; Expires="+h.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.priority)switch("string"==typeof n.priority?n.priority.toLowerCase():n.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var t=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function s(e){return encodeURIComponent(e)}}}),I=f(g()),m=f(g());function k(e){if(!e)return null;try{let t=JSON.parse(e);if(!t)return null;if("Object"===t.constructor.name)return t;if("Array"!==t.constructor.name)throw Error(`Unexpected format: ${t.constructor.name}`);let[r,o,s]=t[0].split("."),n=i(o),a=new TextDecoder,{exp:u,sub:l,...c}=JSON.parse(a.decode(n));return{expires_at:u,expires_in:u-Math.round(Date.now()/1e3),token_type:"bearer",access_token:t[0],refresh_token:t[1],provider_token:t[2],provider_refresh_token:t[3],user:{id:l,factors:t[4],...c}}}catch(e){return console.warn("Failed to parse cookie string:",e),null}}function b(e){var t;return JSON.stringify([e.access_token,e.refresh_token,e.provider_token,e.provider_refresh_token,(null==(t=e.user)?void 0:t.factors)??null])}function C(){return"undefined"!=typeof window&&void 0!==window.document}var v={path:"/",sameSite:"lax",maxAge:31536e6},y=RegExp(".{1,3180}","g"),S=class{constructor(e){this.cookieOptions={...v,...e,maxAge:v.maxAge}}getItem(e){let t=this.getCookie(e);if(e.endsWith("-code-verifier")&&t)return t;if(t)return JSON.stringify(k(t));let r=function(e,t=()=>null){let r=[];for(let o=0;;o++){let s=t(`${e}.${o}`);if(!s)break;r.push(s)}return r.length?r.join(""):null}(e,e=>this.getCookie(e));return null!==r?JSON.stringify(k(r)):null}setItem(e,t){if(e.endsWith("-code-verifier"))return void this.setCookie(e,t);(function(e,t,r){if(1===Math.ceil(t.length/((void 0)??3180)))return[{name:e,value:t}];let o=[],s=t.match(y);return null==s||s.forEach((t,r)=>{let s=`${e}.${r}`;o.push({name:s,value:t})}),o})(e,b(JSON.parse(t))).forEach(e=>{this.setCookie(e.name,e.value)})}removeItem(e){this._deleteSingleCookie(e),this._deleteChunkedCookies(e)}_deleteSingleCookie(e){this.getCookie(e)&&this.deleteCookie(e)}_deleteChunkedCookies(e,t=0){for(let r=t;;r++){let t=`${e}.${r}`;if(void 0===this.getCookie(t))break;this.deleteCookie(t)}}},w=class extends S{constructor(e){super(e)}getCookie(e){return C()?(0,I.parse)(document.cookie)[e]:null}setCookie(e,t){if(!C())return null;document.cookie=(0,I.serialize)(e,t,{...this.cookieOptions,httpOnly:!1})}deleteCookie(e){if(!C())return null;document.cookie=(0,I.serialize)(e,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function A(e,t,r){var o;let s=C();return(0,n.UU)(e,t,{...r,auth:{flowType:"pkce",autoRefreshToken:s,detectSessionInUrl:s,persistSession:!0,storage:r.auth.storage,...(null==(o=r.auth)?void 0:o.storageKey)?{storageKey:r.auth.storageKey}:{}}})}var O=m.parse,N=m.serialize},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83110:e=>{"use strict";var t={decodeValues:!0,map:!1,silent:!1};function r(e){return"string"==typeof e&&!!e.trim()}function o(e,o){var s,i,n,a,u=e.split(";").filter(r),l=(s=u.shift(),i="",n="",(a=s.split("=")).length>1?(i=a.shift(),n=a.join("=")):n=s,{name:i,value:n}),c=l.name,p=l.value;o=o?Object.assign({},t,o):t;try{p=o.decodeValues?decodeURIComponent(p):p}catch(e){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+p+"'. Set options.decodeValues to false to disable this feature.",e)}var h={name:c,value:p};return u.forEach(function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),o=t.join("=");"expires"===r?h.expires=new Date(o):"max-age"===r?h.maxAge=parseInt(o,10):"secure"===r?h.secure=!0:"httponly"===r?h.httpOnly=!0:"samesite"===r?h.sameSite=o:"partitioned"===r?h.partitioned=!0:h[r]=o}),h}function s(e,s){if(s=s?Object.assign({},t,s):t,!e)if(!s.map)return[];else return{};if(e.headers)if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var i=e.headers[Object.keys(e.headers).find(function(e){return"set-cookie"===e.toLowerCase()})];i||!e.headers.cookie||s.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=i}return(Array.isArray(e)||(e=[e]),s.map)?e.filter(r).reduce(function(e,t){var r=o(t,s);return e[r.name]=r,e},{}):e.filter(r).map(function(e){return o(e,s)})}e.exports=s,e.exports.parse=s,e.exports.parseString=o,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,o,s,i,n=[],a=0;function u(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,i=!1;u();)if(","===(r=e.charAt(a))){for(o=a,a+=1,u(),s=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(i=!0,a=s,n.push(e.substring(t,o)),t=a):a=o+1}else a+=1;(!i||a>=e.length)&&n.push(e.substring(t,e.length))}return n}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[4447,580,6570,645,4386,4999],()=>r(16800));module.exports=o})();