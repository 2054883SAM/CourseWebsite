(()=>{var e={};e.id=45,e.ids=[45],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},51046:(e,t,o)=>{"use strict";o.r(t),o.d(t,{patchFetch:()=>g,routeModule:()=>u,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>c});var r={};o.r(r),o.d(r,{OPTIONS:()=>d,POST:()=>p});var s=o(96559),n=o(48088),a=o(37719),i=o(32190);async function p(e){try{console.log("[VdoCipher Upload Caption] Received request");let{videoId:t,captions:o,language:r="en"}=await e.json();if(console.log("[VdoCipher Upload Caption] Inputs:",{videoId:t,hasCaptions:"string"==typeof o&&o.length>0,captionsLength:"string"==typeof o?o.length:0,language:r}),!t||"string"!=typeof t)return i.NextResponse.json({error:"Missing videoId"},{status:400});if(!o||"string"!=typeof o)return i.NextResponse.json({error:"Missing captions string"},{status:400});let s=process.env.VDO_API_SECRET;if(!s)return console.error("[VdoCipher Upload Caption] Missing VDO_API_SECRET"),i.NextResponse.json({error:"VDO_API_SECRET not configured"},{status:500});let n=new FormData,a="captions.vtt",p=new File([o],a,{type:"text/vtt"});console.log("[VdoCipher Upload Caption] Built FormData file entry:",{filename:a,type:"text/vtt"}),n.append("file",p);let d=`https://dev.vdocipher.com/api/videos/${t}/files?language=${encodeURIComponent(r)}`;console.log("[VdoCipher Upload Caption] POST",d);let u=await fetch(d,{method:"POST",headers:{Authorization:`Apisecret ${s}`},body:n});if(console.log("[VdoCipher Upload Caption] Response status:",u.status,u.statusText),!u.ok){let e=await u.text();return console.error("[VdoCipher Upload Caption] Error body:",e),i.NextResponse.json({error:`VdoCipher error: ${u.status} ${e}`},{status:502})}let l=await u.json();return console.log("[VdoCipher Upload Caption] Success body keys:",Object.keys(l||{})),i.NextResponse.json({success:!0,data:l},{status:200})}catch(e){return console.error("[VdoCipher Upload Caption] Unexpected error:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function d(){return i.NextResponse.json({},{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST,OPTIONS"}})}let u=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/upload-video/vdocipher-upload-caption/route",pathname:"/api/upload-video/vdocipher-upload-caption",filename:"route",bundlePath:"app/api/upload-video/vdocipher-upload-caption/route"},resolvedPagePath:"C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\api\\upload-video\\vdocipher-upload-caption\\route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:l,workUnitAsyncStorage:c,serverHooks:h}=u;function g(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:c})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[4447,580],()=>o(51046));module.exports=r})();