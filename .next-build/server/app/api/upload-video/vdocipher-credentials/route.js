(()=>{var e={};e.id=9463,e.ids=[9463],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44552:(e,r,o)=>{"use strict";o.r(r),o.d(r,{patchFetch:()=>h,routeModule:()=>p,serverHooks:()=>C,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>c});var t={};o.r(t),o.d(t,{OPTIONS:()=>l,PUT:()=>d});var s=o(96559),n=o(48088),i=o(37719),a=o(32190);async function d(e){console.log("\uD83D\uDD11 [VdoCipher Credentials] API route called");try{let{title:r,folderId:o="root"}=await e.json();if(console.log("\uD83D\uDD11 [VdoCipher Credentials] Request data:",{title:r,folderId:o}),!r)return console.log("❌ [VdoCipher Credentials] Missing title"),a.NextResponse.json({error:"Video title is required"},{status:400});let t=process.env.VDO_API_SECRET;if(!t)return console.error("❌ [VdoCipher Credentials] VDO_API_SECRET environment variable is not set"),a.NextResponse.json({error:"API configuration error"},{status:500});console.log("\uD83D\uDD11 [VdoCipher Credentials] API secret found, making request to VdoCipher...");let s=`https://dev.vdocipher.com/api/videos?title=${encodeURIComponent(r)}&folderId=${o}`;console.log("\uD83D\uDD11 [VdoCipher Credentials] VdoCipher URL:",s);let n=await fetch(s,{method:"PUT",headers:{Authorization:`Apisecret ${t}`}});if(console.log("\uD83D\uDD11 [VdoCipher Credentials] VdoCipher API response status:",n.status),!n.ok){let e=await n.text();throw console.error("❌ [VdoCipher Credentials] VdoCipher API error:",n.status,e),Error(`VdoCipher API error: ${n.status} ${n.statusText}`)}let i=await n.json();return console.log("✅ [VdoCipher Credentials] VdoCipher API success:",{hasClientPayload:!!i.clientPayload,videoId:i.videoId,uploadLink:i.clientPayload?.uploadLink}),a.NextResponse.json({clientPayload:i.clientPayload,videoId:i.videoId},{status:200,headers:{"Access-Control-Allow-Origin":"*"}})}catch(e){return console.error("❌ [VdoCipher Credentials] Error obtaining upload credentials:",e),a.NextResponse.json({error:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function l(){return new a.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}let p=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/upload-video/vdocipher-credentials/route",pathname:"/api/upload-video/vdocipher-credentials",filename:"route",bundlePath:"app/api/upload-video/vdocipher-credentials/route"},resolvedPagePath:"C:\\Users\\Konan\\Documents\\MONSPACE\\CourseWebsite-1\\app\\api\\upload-video\\vdocipher-credentials\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:u,workUnitAsyncStorage:c,serverHooks:C}=p;function h(){return(0,i.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:c})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[4447,580],()=>o(44552));module.exports=t})();