(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3005],{4874:(e,t,r)=>{Promise.resolve().then(r.bind(r,6314))},6314:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var n,i=r(5155),o=r(2115),s="basil",a="https://js.stripe.com",c="".concat(a,"/").concat(s,"/stripe.js"),l=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,d=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,u=function(){for(var e=document.querySelectorAll('script[src^="'.concat(a,'"]')),t=0;t<e.length;t++){var r,n=e[t];if(r=n.src,l.test(r)||d.test(r))return n}return null},p=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(c).concat(t);var n=document.head||document.body;if(!n)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},h=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:t})},m=null,f=null,w=null,v=function(e,t,r){if(null===e)return null;var n,i=t[0].match(/^pk_test/),o=3===(n=e.version)?"v3":n;i&&o!==s&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(s,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return h(a,r),a},b=!1,S=function(){return n?n:n=(null!==m?m:(m=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document)return void e(null);if(window.Stripe,window.Stripe)return void e(window.Stripe);try{var r,n=u();n?n&&null!==w&&null!==f&&(n.removeEventListener("load",w),n.removeEventListener("error",f),null==(r=n.parentNode)||r.removeChild(n),n=p(null)):n=p(null),w=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},f=function(e){t(Error("Failed to load Stripe.js",{cause:e}))},n.addEventListener("load",w),n.addEventListener("error",f)}catch(e){t(e);return}})).catch(function(e){return m=null,Promise.reject(e)})).catch(function(e){return n=null,Promise.reject(e)})};Promise.resolve().then(function(){return S()}).catch(function(e){b||console.warn(e)});var j=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];b=!0;var n=Date.now();return S().then(function(e){return v(e,t,n)})};function y(){let[e,t]=(0,o.useState)(!1),[r,n]=(0,o.useState)(null),s=async()=>{try{t(!0),n(null);let e=await j("pk_test_51Rzl0zQiZZmqQUE9LVo5Ss7KYcS7QAKxzir5H6O2dCuaJbN7s4tEr6CZotZjhfIbGz56aSFhaIbJLZS9ZEvBES6w00a49lznJ2");if(!e){n("Failed to initialize Stripe.js"),t(!1);return}let r=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:"price_1RzmIuQiZZmqQUE9bMreaTef"})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||"Failed to create session")}let i=await r.json();if(i.url){window.location.href=i.url;return}let o=await e.redirectToCheckout({sessionId:i.id});o.error&&n(o.error.message||"Redirect failed")}catch(e){n(e.message||"Something went wrong")}finally{t(!1)}};return(0,i.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-md",children:[(0,i.jsx)("h2",{className:"mb-4 text-lg font-semibold",children:"Start Test Subscription"}),(0,i.jsx)("p",{className:"mb-4 text-sm text-gray-600",children:"Uses Stripe sandbox mode automatically when you use test keys."}),(0,i.jsx)("button",{disabled:e,onClick:s,className:"rounded bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-700 ".concat(e?"opacity-60":""),children:e?"Creating sessionâ€¦":"Subscribe (Test)"}),r&&(0,i.jsx)("p",{className:"mt-3 text-sm text-red-600",children:r}),(0,i.jsx)("div",{className:"mt-6 rounded border border-yellow-200 bg-yellow-50 p-4 text-sm text-yellow-800",children:(0,i.jsx)("p",{children:"Use Stripe test card 4242 4242 4242 4242, any future date, any CVC. Subscriptions will trigger test webhooks if configured."})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(4874)),_N_E=e.O()}]);