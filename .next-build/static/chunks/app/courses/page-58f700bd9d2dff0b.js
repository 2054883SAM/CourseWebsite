(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7676],{20:(e,t,r)=>{"use strict";r.d(t,{As:()=>l,OJ:()=>i,cy:()=>o});var s=r(5155),a=r(2115),n=r(6414);let o=(0,a.createContext)(null);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(()=>{let e="https://qrowzznnnarfogfbnnow.supabase.co";if(!e)return"default";let t=e.match(/https:\/\/([a-z0-9-]+)\.supabase\.co/);return t?t[1]:"default"})();console.log("Auth cookies at startup:",document.cookie.split(";").map(e=>e.trim()).filter(e=>e.startsWith("sb-")||e.includes("supabase"))),console.log("Looking for cookie format:","sb-".concat(e,"-auth-token")),n.N.auth.getUser().then(e=>{let{data:{user:t},error:r}=e;r&&console.error("Error getting initial user:",r),console.log("Initial auth user:",t?"Present":"None",t?"(User: ".concat(t.email,")"):""),i(null!=t?t:null),t?h(t.id):u(!1)});let{data:{subscription:t}}=n.N.auth.onAuthStateChange(async(e,t)=>{var r;if(console.log("Auth state change event:",e),console.log("Session after event:",t?"Present":"None"),i(null!=(r=null==t?void 0:t.user)?r:null),null==t?void 0:t.user){if("SIGNED_IN"===e||"TOKEN_REFRESHED"===e)try{await fetch("/api/auth/cookie",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_token:t.access_token,refresh_token:t.refresh_token}),credentials:"include"})}catch(e){console.warn("Failed to sync auth cookies on state change:",e)}h(t.user.id)}else c(null),u(!1)});return()=>{t.unsubscribe()}},[]);let h=async e=>{try{let{data:t,error:r}=await n.N.from("users").select("*").eq("id",e).single();if(r)throw r;c(t)}catch(e){console.error("Error fetching user data:",e),c(null)}finally{u(!1)}},m=async(e,t)=>{try{console.log("Attempting sign in for:",e),await n.N.auth.signOut();let{data:r,error:s}=await n.N.auth.signInWithPassword({email:e,password:t});return r.session&&await fetch("/api/auth/cookie",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_token:r.session.access_token,refresh_token:r.session.refresh_token}),credentials:"include"}),{error:s}}catch(e){return console.error("Unexpected error during sign in:",e),{error:e}}},x=async()=>{try{await n.N.auth.signOut(),console.log("Sign out completed. Session cleared.")}catch(e){console.error("Error signing out:",e)}},g=async(e,t,r)=>{try{console.log("Attempting sign up for:",e);let{data:a,error:o}=await n.N.auth.signUp({email:e,password:t,options:{data:{name:r},emailRedirectTo:"".concat(window.location.origin,"/signin")}});if(o)throw o;let i={success:!o,user:a.user?"".concat(a.user.email):"Missing",session:a.session?"Present":"Missing (email confirmation may be required)"};console.log("Sign up response:",i);let l=!a.session;if(a.user){var s;return{error:null,requiresEmailConfirmation:l,email:null!=(s=a.user.email)?s:e}}throw Error("Signup failed. Please try again.")}catch(e){return console.error("Error during sign up:",e),{error:e,requiresEmailConfirmation:!1}}},f=async e=>{try{let{error:t}=await n.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)return{error:t};return{error:null}}catch(e){return console.error("Error sending password reset email:",e),{error:e}}},p=async(e,t)=>{try{let{data:r,error:s}=await n.N.auth.signInWithOAuth({provider:e,options:{redirectTo:null!=t?t:"".concat(window.location.origin,"/"),queryParams:{prompt:"select_account"}}});if(s)throw s;return{error:null}}catch(e){return console.error("OAuth sign-in error:",e),{error:e}}};return(0,s.jsx)(o.Provider,{value:{user:r,dbUser:l,loading:d,signIn:m,signOut:x,signUp:g,signInWithProvider:p,resetPassword:f,checkPermission:e=>{let t=null==l?void 0:l.role;return!!t&&("admin"===e?"admin"===t:"teacher"===e?"admin"===t||"teacher"===t:"student"===e)}},children:t})}function l(){let e=(0,a.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1760:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var s=r(5155),a=r(9137),n=r.n(a),o=r(2115),i=r(6874),l=r.n(i),c=r(6766);function d(e){let{text:t,query:r,className:a="",highlightClassName:n="bg-yellow-200 font-medium"}=e;if(!r||!r.trim())return(0,s.jsx)("span",{className:a,children:t});try{let e=RegExp("(".concat(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi"),o=t.split(e);return(0,s.jsx)("span",{className:a,children:o.map((e,t)=>e.toLowerCase()===r.toLowerCase()?(0,s.jsx)("span",{className:n,children:e},t):(0,s.jsx)("span",{children:e},t))})}catch(e){return console.error("Error in SearchHighlight:",e),(0,s.jsx)("span",{className:a,children:t})}}var u=r(20);function h(e){let{courses:t,searchQuery:r="",onCourseDeleted:a,onDeleteStart:n,onDeleteEnd:o,onDeleteError:i}=e;return 0===t.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Aucun cours trouv\xe9"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:r?'Aucun r\xe9sultat ne correspond \xe0 votre recherche "'.concat(r,"\". Essayez d'autres mots-cl\xe9s."):"Essayez d'ajuster vos crit\xe8res de recherche ou de filtrage."})]}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsx)(m,{course:e,searchQuery:r,onDeleted:a,onDeleteStart:n,onDeleteEnd:o,onDeleteError:i},e.id))})}function m(e){var t,r,a;let{course:n,searchQuery:o="",onDeleted:i,onDeleteStart:h,onDeleteEnd:m,onDeleteError:x}=e,{dbUser:g}=(0,u.As)(),f=async()=>{if(confirm("Supprimer ce cours ? Cette action est irr\xe9versible."))try{null==h||h();let e=await fetch("/api/courses/".concat(n.id,"/delete"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({courseId:n.id})});if(e.ok)null==i||i(n.id);else{let{error:t}=await e.json().catch(()=>({error:"Delete failed"}));null==x||x(e.status,t||"Delete failed")}}catch(e){null==x||x(-1,(null==e?void 0:e.message)||"Delete failed")}finally{null==m||m()}};return(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,s.jsxs)("div",{className:"relative w-full sm:w-64 h-48 sm:h-auto flex-shrink-0",children:[n.thumbnail_url?(0,s.jsx)(c.default,{src:n.thumbnail_url,alt:n.title,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"Aucune image"})}),!g&&(0,s.jsx)("div",{className:"absolute bottom-0 right-0 bg-green-600 text-white px-2 py-1 text-sm font-semibold",children:"Connectez-vous pour vous inscrire"})]}),(0,s.jsxs)("div",{className:"p-4 sm:p-5 flex-1",children:[(0,s.jsxs)(l(),{href:"/courses/".concat(n.id),className:"block",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-1 group-hover:text-gold-600 dark:group-hover:text-gold-400",children:o?(0,s.jsx)(d,{text:n.title,query:o}):n.title})}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:o?(0,s.jsx)(d,{text:n.description,query:o}):n.description})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(null==(t=n.creator)?void 0:t.photo_url)?(0,s.jsx)(c.default,{src:n.creator.photo_url,alt:n.creator.name,width:24,height:24,className:"rounded-full mr-2"}):(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 text-gray-600 dark:text-gray-300 rounded-full flex items-center justify-center mr-2",children:(null==(r=n.creator)?void 0:r.name.charAt(0))||"U"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:(null==(a=n.creator)?void 0:a.name)||"Cr\xe9ateur inconnu"})]}),g&&(0,s.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,s.jsxs)("span",{className:"text-sm",children:[n.section_count||0," ",1===n.section_count?"section":"sections"]})]}),!g&&(0,s.jsx)("button",{onClick:()=>window.location.href="/signin",className:"text-sm text-gold-600 hover:text-gold-800 dark:text-gold-400 dark:hover:text-gold-300 font-medium",children:"Connectez-vous pour voir tous les d\xe9tails"}),(null==g?void 0:g.role)==="admin"&&(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("button",{onClick:f,title:"Supprimer",className:"inline-flex items-center justify-center px-3 py-2 rounded-md bg-red-600 text-white shadow hover:bg-red-700 transition",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m-7 0V5a 2 2 0 012-2h2a2 2 0 012 2v2m-7 0h8"})}),"Supprimer"]})})]})]})]}),(null==g?void 0:g.role)==="admin"&&(0,s.jsx)("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700",children:(0,s.jsxs)(l(),{href:"/courses/".concat(n.id,"/edit"),className:"w-full inline-flex items-center justify-center px-4 py-2 rounded-lg bg-gold-600 text-white font-semibold shadow hover:bg-gold-700 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M4 13.5V19h5.5l9.621-9.621a1.5 1.5 0 000-2.121l-3.379-3.379a1.5 1.5 0 00-2.121 0L4 13.5z"})}),"Modifier"]})})]})}function x(e){let{courses:t,searchQuery:r="",onCourseDeleted:a,onDeleteStart:n,onDeleteEnd:o,onDeleteError:i}=e;return 0===t.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Aucun cours trouv\xe9"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:r?'Aucun r\xe9sultat ne correspond \xe0 votre recherche "'.concat(r,"\". Essayez d'autres mots-cl\xe9s."):"Essayez d'ajuster vos crit\xe8res de recherche ou de filtrage."})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:t.map((e,t)=>(0,s.jsx)(g,{course:e,searchQuery:r,index:t,onDeleted:a,onDeleteStart:n,onDeleteEnd:o,onDeleteError:i},e.id))})}function g(e){var t,r,a,n,o,i;let{course:h,searchQuery:m="",index:x,onDeleted:g,onDeleteStart:f,onDeleteEnd:p,onDeleteError:y}=e,{dbUser:v}=(0,u.As)(),b=async()=>{if(confirm("Supprimer ce cours ? Cette action est irr\xe9versible."))try{null==f||f();let e=await fetch("/api/courses/".concat(h.id,"/delete"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({courseId:h.id})});if(e.ok)null==g||g(h.id);else{let{error:t}=await e.json().catch(()=>({error:"Delete failed"}));null==y||y(e.status,t||"Delete failed")}}catch(e){null==y||y(-1,(null==e?void 0:e.message)||"Delete failed")}finally{null==p||p()}};return(0,s.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 animate-fade-in-up",style:{animationDelay:"".concat(100*x,"ms")},children:[(0,s.jsxs)("div",{className:"relative h-56 w-full overflow-hidden",children:[h.thumbnail_url?(0,s.jsx)(c.default,{src:h.thumbnail_url,alt:h.title,fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw",className:"object-cover transition-transform duration-500 group-hover:scale-110"}):(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-4xl text-gray-400 dark:text-gray-500",children:"\uD83D\uDCDA"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Aucune image"})]})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsx)("div",{className:"absolute top-4 right-4",children:!v&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg",children:"Se connecter"})}),h.niveau_difficulte&&(0,s.jsx)("div",{className:"absolute top-4 left-4",children:(0,s.jsx)("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm text-gray-700 dark:text-gray-300 px-2 py-1 rounded-full text-xs font-medium",children:h.niveau_difficulte})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)(l(),{href:"/courses/".concat(h.id),className:"block",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-gold-600 dark:group-hover:text-gold-400 transition-colors duration-200 line-clamp-2",children:m?(0,s.jsx)(d,{text:h.title,query:m}):h.title}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-3",children:m?(0,s.jsx)(d,{text:h.description,query:m}):h.description})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(null==(t=h.creator)?void 0:t.photo_url)?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.default,{src:h.creator.photo_url,alt:h.creator.name,width:32,height:32,className:"rounded-full border-2 border-white dark:border-gray-700 shadow-sm"}),(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-700"})]}):(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs font-bold text-gray-600 dark:text-gray-300",children:(null==(n=h.creator)||null==(a=n.name)||null==(r=a[0])?void 0:r.toUpperCase())||"C"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null==(o=h.creator)?void 0:o.name)||"Cr\xe9ateur"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Cr\xe9ateur"}),(null==(i=h.creator)?void 0:i.bio)&&(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-500 mt-1 line-clamp-1",children:h.creator.bio})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==v?void 0:v.role)==="admin"&&(0,s.jsx)("button",{onClick:b,title:"Supprimer",className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-red-600 text-white shadow-lg hover:bg-red-700 transition-all duration-200 transform hover:scale-110 group-hover:shadow-xl",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m-7 0V5a2 2 0 012-2h2a2 2 0 012 2v2m-7 0h8"})})}),(0,s.jsx)(l(),{href:"/courses/".concat(h.id),className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-gray-600 to-gray-800 text-white shadow-lg hover:from-gray-700 hover:to-gray-900 transition-all duration-200 transform hover:scale-110 group-hover:shadow-xl",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),h.duree_estimee&&(0,s.jsxs)("div",{className:"mt-4 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.duree_estimee]}),(null==v?void 0:v.role)==="admin"&&(0,s.jsxs)(l(),{href:"/courses/".concat(h.id,"/edit"),className:"mt-6 w-full inline-flex items-center justify-center px-4 py-2 rounded-lg bg-gold-600 text-white font-semibold shadow hover:bg-gold-700 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M4 13.5V19h5.5l9.621-9.621a1.5 1.5 0 000-2.121l-3.379-3.379a1.5 1.5 0 00-2.121 0L4 13.5z"})}),"Modifier"]})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})}var f=r(5695);function p(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})})}function y(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}function v(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}function b(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function j(e){let{currentView:t}=e,r=(0,f.useRouter)(),a=(0,f.usePathname)(),n=e=>{let t=new URLSearchParams(window.location.search);t.set("view",e),r.push("".concat(a,"?").concat(t.toString()))};return(0,s.jsxs)("div",{className:"inline-flex bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-1 shadow-sm",children:[(0,s.jsx)("button",{onClick:()=>n("grid"),className:"p-2 rounded-md flex items-center transition-all duration-200 ".concat("grid"===t?"bg-gradient-to-r from-gray-600 to-gray-800 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":"Vue grille",children:(0,s.jsx)(p,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>n("list"),className:"p-2 rounded-md flex items-center transition-all duration-200 ".concat("list"===t?"bg-gradient-to-r from-gray-600 to-gray-800 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":"Vue liste",children:(0,s.jsx)(y,{className:"w-5 h-5"})})]})}function w(){let e=[,,,,,].fill(0);return(0,s.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,s.jsx)(k,{},t))})}function k(){return(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row",children:[(0,s.jsx)("div",{className:"relative sm:w-64 h-48 sm:h-auto bg-gray-200 animate-pulse"}),(0,s.jsxs)("div",{className:"p-4 sm:p-5 flex-1 flex flex-col justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"h-7 bg-gray-200 rounded animate-pulse mb-2 w-3/4"}),(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded-full animate-pulse w-24 ml-2"})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-full"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-4/6"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full animate-pulse mr-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})]}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-20"})]})]})]})})}function N(){let e=Array(8).fill(0);return(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map((e,t)=>(0,s.jsx)(S,{},t))})}function S(){return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[(0,s.jsx)("div",{className:"h-48 bg-gray-200 animate-pulse"}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-1 w-3/4"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-4 w-1/2"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full animate-pulse mr-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-20"})]}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-16"})]})]})]})}let _="ezioacademy_recent_searches";function C(e){let{initialQuery:t="",className:r=""}=e,[a,n]=(0,o.useState)(t),[i,l]=(0,o.useState)([]),[c,d]=(0,o.useState)([]),[u]=(0,o.useState)(["JavaScript","React","Python","Web Development","Data Science"]),[h,m]=(0,o.useState)(!1),[x,g]=(0,o.useState)(!1),p=(0,o.useRef)(),y=(0,o.useRef)(null),j=(0,o.useRef)(null),w=(0,f.useRouter)(),k=(0,f.usePathname)(),N=(0,f.useSearchParams)();(0,o.useEffect)(()=>{try{let e=localStorage.getItem(_);e&&d(JSON.parse(e))}catch(e){console.error("Error loading recent searches:",e)}},[]),(0,o.useEffect)(()=>a.length<2?void l([]):(p.current&&clearTimeout(p.current),p.current=setTimeout(async()=>{g(!0);try{let e=await fetch("/api/search/suggestions?q=".concat(encodeURIComponent(a)));if(e.ok){let t=await e.json();l(t.suggestions)}}catch(e){console.error("Error fetching suggestions:",e)}finally{g(!1)}},300),()=>{p.current&&clearTimeout(p.current)}),[a]);let S=e=>{n(e),C(e);let t=new URLSearchParams(N.toString());t.set("query",e),w.push("".concat(k,"?").concat(t.toString())),m(!1)},C=e=>{let t=e.trim();t&&d(e=>{let r=e.filter(e=>e!==t),s=[t,...r].slice(0,5);try{localStorage.setItem(_,JSON.stringify(s))}catch(e){console.error("Error saving recent searches:",e)}return s})};return(0,o.useEffect)(()=>{let e=e=>{j.current&&!j.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.jsxs)("div",{className:"relative ".concat(r),children:[(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!a.trim())return;C(a);let t=new URLSearchParams(N.toString());t.set("query",a),w.push("".concat(k,"?").concat(t.toString())),m(!1)},className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:y,type:"text",value:a,onChange:e=>n(e.target.value),onFocus:()=>m(!0),placeholder:"Rechercher des cours...",className:"w-full px-6 py-4 pl-14 pr-12 text-lg border-2 border-gray-200 dark:border-gray-600 rounded-2xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-gold-500/20 focus:border-gold-500 dark:focus:border-gold-400 transition-all duration-300 shadow-lg hover:shadow-xl","aria-label":"Rechercher des cours"}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-5 pointer-events-none",children:(0,s.jsx)(v,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})}),a&&(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",onClick:()=>{var e;n(""),null==(e=y.current)||e.focus()},"aria-label":"Effacer la recherche",children:(0,s.jsx)(b,{className:"w-5 h-5"})})]}),(0,s.jsx)("button",{type:"submit",className:"absolute right-2 top-2 px-6 py-2 font-semibold text-white bg-gradient-to-r from-gray-600 to-gray-800 rounded-xl hover:from-gray-700 hover:to-gray-900 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105 shadow-lg","aria-label":"Rechercher",children:"Rechercher"})]}),h&&(0,s.jsx)("div",{ref:j,className:"absolute top-full left-0 right-0 mt-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-600 rounded-2xl shadow-2xl backdrop-blur-sm z-[99999]",children:a.length>=2?(0,s.jsx)("div",{className:"p-4",children:x?(0,s.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gold-600"}),(0,s.jsx)("span",{className:"ml-3 text-gray-500 dark:text-gray-400",children:"Chargement des suggestions..."})]}):i.length>0?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"px-2 py-2 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Suggestions"}),(0,s.jsx)("ul",{className:"space-y-1",children:i.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)("button",{type:"button",className:"w-full px-4 py-3 text-left rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",onClick:()=>S(e),children:["\uD83D\uDD0D ",e]})},"suggestion-".concat(t)))})]}):(0,s.jsxs)("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"text-2xl mb-2 block",children:"\uD83D\uDD0D"}),"Aucune suggestion trouv\xe9e"]})}):(0,s.jsxs)("div",{className:"p-4",children:[c.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"px-2 py-2 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Recherches r\xe9centes"}),(0,s.jsx)("ul",{className:"space-y-1",children:c.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)("button",{type:"button",className:"w-full px-4 py-3 text-left rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",onClick:()=>S(e),children:["⏰ ",e]})},"recent-".concat(t)))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"px-2 py-2 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Recherches populaires"}),(0,s.jsx)("ul",{className:"space-y-1",children:u.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsxs)("button",{type:"button",className:"w-full px-4 py-3 text-left rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",onClick:()=>S(e),children:["\uD83D\uDD25 ",e]})},"popular-".concat(t)))})]})]})})]})}var E=r(8183),z=r(970);let D=e=>{switch(e){case"Fran\xe7ais":return"\uD83D\uDCDA";case"Math\xe9matiques":return"\uD83D\uDD22";case"Science et technologie":return"\uD83D\uDD2C";case"G\xe9ographie et histoire":return"\uD83C\uDF0D";case"Culture et citoyennet\xe9 qu\xe9b\xe9coise":return"\uD83C\uDF41";default:return"\uD83D\uDCD6"}},R=e=>{switch(e){case"Fran\xe7ais":return{bg:"from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/30",border:"border-blue-200 dark:border-blue-700",text:"text-blue-900 dark:text-blue-100"};case"Math\xe9matiques":return{bg:"from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/30",border:"border-green-200 dark:border-green-700",text:"text-green-900 dark:text-green-100"};case"Science et technologie":return{bg:"from-purple-50 to-violet-100 dark:from-purple-900/20 dark:to-violet-900/30",border:"border-purple-200 dark:border-purple-700",text:"text-purple-900 dark:text-purple-100"};case"G\xe9ographie et histoire":return{bg:"from-orange-50 to-amber-100 dark:from-orange-900/20 dark:to-amber-900/30",border:"border-orange-200 dark:border-orange-700",text:"text-orange-900 dark:text-orange-100"};case"Culture et citoyennet\xe9 qu\xe9b\xe9coise":return{bg:"from-red-50 to-rose-100 dark:from-red-900/20 dark:to-rose-900/30",border:"border-red-200 dark:border-red-700",text:"text-red-900 dark:text-red-100"};default:return{bg:"from-gray-50 to-slate-100 dark:from-gray-900/20 dark:to-slate-900/30",border:"border-gray-200 dark:border-gray-700",text:"text-gray-900 dark:text-gray-100"}}};function L(e){let{categories:t}=e;return 0===t.length?(0,s.jsxs)("div",{className:"py-16 text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:(0,s.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCDA"})}),(0,s.jsx)("h3",{className:"mb-4 text-2xl font-semibold text-gray-900 dark:text-white",children:"Aucune cat\xe9gorie disponible"}),(0,s.jsx)("p",{className:"mx-auto max-w-md text-gray-600 dark:text-gray-400",children:"Il n'y a actuellement aucune cat\xe9gorie de cours disponible."})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>{let t=R(e.categorie),r=D(e.categorie);return(0,s.jsx)(l(),{href:"/courses?category=".concat(encodeURIComponent(e.categorie)),className:"group block",children:(0,s.jsxs)("div",{className:"\n              relative rounded-2xl border-2 p-8 ".concat(t.border,"\n              bg-gradient-to-br ").concat(t.bg,"\n              transition-all duration-300 ease-in-out\n              group-hover:scale-105 group-hover:shadow-xl\n              group-hover:shadow-gray-200/50 dark:group-hover:shadow-gray-900/30\n            "),children:[(0,s.jsx)("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-white/50 text-4xl shadow-sm transition-colors duration-300 group-hover:bg-white/70 dark:bg-gray-800/30 dark:group-hover:bg-gray-800/50",children:r}),(0,s.jsx)("h3",{className:"mb-3 text-center text-xl font-bold ".concat(t.text," transition-transform duration-300 group-hover:scale-105"),children:e.categorie}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("span",{className:"inline-flex items-center rounded-full px-4 py-2 text-sm font-medium ".concat(t.text," bg-white/40 transition-colors duration-300 group-hover:bg-white/60 dark:bg-gray-800/40 dark:group-hover:bg-gray-800/60"),children:[e.count," cours"]})}),(0,s.jsx)("div",{className:"absolute right-4 top-4 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:(0,s.jsx)("svg",{className:"h-5 w-5 ".concat(t.text),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})})]})},e.categorie)})})}var A=r(7667);let F=(0,z.r)(function(){let e=(0,f.useSearchParams)(),[t,r]=(0,o.useState)(!0),[a,i]=(0,o.useState)([]),[c,d]=(0,o.useState)([]),[u,m]=(0,o.useState)(null),[g,p]=(0,o.useState)(0),[y,v]=(0,o.useState)(!1),[b,k]=(0,o.useState)(null),S=e.get("view")||"grid",_=e.get("query")||"",z=e.get("creator")||void 0,D=e.get("category")||void 0,R=e.get("sort")||void 0,F=e.get("order")||void 0,I=e.get("page")||"1",M=!D&&!_&&!z,P=(0,o.useCallback)(async e=>{if(e)try{if(M){let t=(0,E.JT)()?[{categorie:"Fran\xe7ais",count:2},{categorie:"Math\xe9matiques",count:1},{categorie:"Science et technologie",count:1},{categorie:"G\xe9ographie et histoire",count:1}]:await (0,E.bW)();if(!e)return;d(t),i([])}else{let t=(0,E.JT)()?E.jy.b_.filter(e=>{let t=!0;return _&&(t=t&&(e.title.toLowerCase().includes(_.toLowerCase())||e.description.toLowerCase().includes(_.toLowerCase()))),D&&e.categorie&&(t=t&&e.categorie===D),z&&(t=t&&e.creator_id===z),t}):await (0,E.NJ)({query:_,creator_id:z,category:D,sort_by:R,sort_order:F,page:parseInt(I),limit:12});if(!e)return;i(t),d([])}m(null),p(Date.now())}catch(t){if(console.error("Error fetching data:",t),!e)return;m("Failed to load data. Please try again."),i([]),d([])}finally{e&&r(!1)}},[M,_,z,D,R,F,I]);if((0,o.useEffect)(()=>{let e=!0;return r(!0),P(e),()=>{e=!1}},[P]),(0,o.useEffect)(()=>{if("undefined"==typeof document)return;let e=()=>{!document.hidden&&Date.now()-g>3e5&&(P(!0),r(!0))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[P,g]),t)return"grid"===S?(0,s.jsx)(N,{}):(0,s.jsx)(w,{});if(u)return(0,s.jsx)("div",{className:"min-h-screen w-full bg-white",children:(0,s.jsx)("div",{className:"w-full py-20",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20",children:(0,s.jsx)("svg",{className:"h-8 w-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("h3",{className:"mb-2 text-xl font-semibold text-gray-900 dark:text-white",children:"Erreur de chargement"}),(0,s.jsx)("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:u}),(0,s.jsx)("button",{onClick:()=>{r(!0),P(!0)},className:"inline-flex transform items-center rounded-full bg-gradient-to-r from-gray-600 to-gray-800 px-6 py-3 font-semibold text-white shadow-lg transition-all duration-300 hover:scale-105 hover:from-gray-700 hover:to-gray-900 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2",children:"\uD83D\uDD04 R\xe9essayer"})]})})})});let O=e=>{i(t=>t.filter(t=>t.id!==e))},T=()=>{k(null),v(!0)},U=()=>{v(!1)},q=(e,t)=>{v(!1),k({status:e,message:t})};return(0,s.jsxs)("div",{className:"min-h-screen w-full bg-white",children:[(0,s.jsx)("div",{className:"w-full py-20",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("div",{className:"animate-fade-in-up mb-16 text-center",children:[(0,s.jsx)("div",{className:"mb-6 inline-flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDA"})}),(0,s.jsx)("h1",{className:"mb-4 text-4xl font-bold text-gray-900 md:text-5xl lg:text-6xl",children:M?(0,s.jsx)("span",{className:"text-blue-700",children:"Mati\xe8res Scolaires"}):D?"Cours de ".concat(D):"Catalogue de Cours"}),(0,s.jsx)("p",{className:"mx-auto max-w-3xl text-xl text-gray-600 dark:text-gray-300",children:M?"Explorez nos mati\xe8res conformes au programme scolaire qu\xe9b\xe9cois":D?"D\xe9couvrez tous nos cours de ".concat(D):"D\xe9couvrez notre collection de cours de qualit\xe9 pour d\xe9velopper vos comp\xe9tences et atteindre vos objectifs"})]}),(0,s.jsx)("div",{className:"animate-fade-in-up relative z-10 mb-12",style:{animationDelay:"0.2s"},children:(0,s.jsx)("div",{className:"mx-auto max-w-3xl",children:(0,s.jsx)(C,{initialQuery:_,className:"w-full"})})}),(0,s.jsxs)("div",{className:"animate-fade-in-up mb-8 flex flex-col justify-between md:flex-row md:items-center",style:{animationDelay:"0.4s"},children:[(0,s.jsx)("div",{className:"mb-4 md:mb-0",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-green-500"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:M?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:c.length})," ","mati\xe8res disponibles"]}):_?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:a.length})," ","cours trouv\xe9",1!==a.length&&"s"," pour"," ",(0,s.jsxs)("span",{className:"font-semibold text-gold-600 dark:text-gold-400",children:["“",_,"”"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:a.length})," ","cours disponibles",D&&(0,s.jsxs)(s.Fragment,{children:[" ","en"," ",(0,s.jsx)("span",{className:"font-semibold text-gold-600 dark:text-gold-400",children:D})]})]})})]})}),!M&&(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"hidden items-center space-x-2 text-sm text-gray-500 dark:text-gray-400 md:flex",children:(0,s.jsx)("span",{children:"Vue :"})}),(0,s.jsx)(j,{currentView:S})]})]}),D&&(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsx)(l(),{href:"/courses",className:"transition-colors hover:text-gold-600 dark:hover:text-gold-400",children:"Mati\xe8res"}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:D})]})}),(0,s.jsx)("div",{className:"animate-fade-in-up relative z-0",style:{animationDelay:"0.6s"},children:(0,s.jsx)(o.Suspense,{fallback:"grid"===S?(0,s.jsx)(N,{}):(0,s.jsx)(w,{}),children:M?(0,s.jsx)(L,{categories:c}):"grid"===S?(0,s.jsx)(x,{courses:a,searchQuery:_,onCourseDeleted:O,onDeleteStart:T,onDeleteEnd:U,onDeleteError:q}):(0,s.jsx)(h,{courses:a,searchQuery:_,onCourseDeleted:O,onDeleteStart:T,onDeleteEnd:U,onDeleteError:q})})}),!M&&0===a.length&&!t&&(0,s.jsxs)("div",{className:"animate-fade-in-up py-16 text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:(0,s.jsx)("span",{className:"text-3xl",children:"\uD83D\uDD0D"})}),(0,s.jsx)("h3",{className:"mb-4 text-2xl font-semibold text-gray-900 dark:text-white",children:"Aucun cours trouv\xe9"}),(0,s.jsx)("p",{className:"mx-auto max-w-md text-gray-600 dark:text-gray-400",children:_?'Aucun r\xe9sultat ne correspond \xe0 votre recherche "'.concat(_,"\". Essayez d'autres mots-cl\xe9s."):"Essayez d'ajuster vos crit\xe8res de recherche ou de filtres."}),_&&(0,s.jsx)("button",{onClick:()=>{let t=new URLSearchParams(e.toString());t.delete("query"),window.location.search=t.toString()},className:"mt-6 inline-flex transform items-center rounded-full bg-gradient-to-r from-gray-600 to-gray-700 px-6 py-3 font-semibold text-white shadow-lg transition-all duration-300 hover:scale-105 hover:from-gray-700 hover:to-gray-800 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2",children:"✨ Voir tous les cours"})]})]})}),y&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"jsx-ef0493a2f280ef3b flex flex-col items-center gap-4 rounded-xl bg-white/90 p-6 shadow-xl dark:bg-gray-800/90",children:[(0,s.jsx)(A.k,{size:"large",color:"blue"}),(0,s.jsx)("div",{className:"jsx-ef0493a2f280ef3b h-2 w-56 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:(0,s.jsx)("div",{className:"jsx-ef0493a2f280ef3b loading-bar h-full rounded-full bg-gradient-to-r from-gray-300 via-gray-500 to-gray-300"})}),(0,s.jsx)("p",{className:"jsx-ef0493a2f280ef3b text-sm text-gray-700 dark:text-gray-300",children:"Suppression du cours en cours…"}),(0,s.jsx)(n(),{id:"ef0493a2f280ef3b",children:"@-webkit-keyframes indeterminate{0%{-webkit-transform:translatex(-100%);transform:translatex(-100%)}50%{-webkit-transform:translatex(0%);transform:translatex(0%)}100%{-webkit-transform:translatex(100%);transform:translatex(100%)}}@-moz-keyframes indeterminate{0%{-moz-transform:translatex(-100%);transform:translatex(-100%)}50%{-moz-transform:translatex(0%);transform:translatex(0%)}100%{-moz-transform:translatex(100%);transform:translatex(100%)}}@-o-keyframes indeterminate{0%{-o-transform:translatex(-100%);transform:translatex(-100%)}50%{-o-transform:translatex(0%);transform:translatex(0%)}100%{-o-transform:translatex(100%);transform:translatex(100%)}}@keyframes indeterminate{0%{-webkit-transform:translatex(-100%);-moz-transform:translatex(-100%);-o-transform:translatex(-100%);transform:translatex(-100%)}50%{-webkit-transform:translatex(0%);-moz-transform:translatex(0%);-o-transform:translatex(0%);transform:translatex(0%)}100%{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}}.loading-bar.jsx-ef0493a2f280ef3b{width:40%;-webkit-animation:indeterminate 1.1s ease-in-out infinite;-moz-animation:indeterminate 1.1s ease-in-out infinite;-o-animation:indeterminate 1.1s ease-in-out infinite;animation:indeterminate 1.1s ease-in-out infinite}"})]})}),b&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,s.jsxs)("div",{className:"mx-4 w-full max-w-md rounded-2xl bg-white p-6 text-center shadow-2xl dark:bg-gray-800",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20",children:(0,s.jsx)("svg",{className:"h-8 w-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("h3",{className:"mb-2 text-xl font-semibold text-gray-900 dark:text-white",children:"Impossible de supprimer le cours"}),(0,s.jsx)("p",{className:"mb-3 text-gray-600 dark:text-gray-300",children:b.status>=500||-1===b.status?"Une erreur serveur est survenue.":"Une erreur est survenue."}),(0,s.jsxs)("p",{className:"mb-6 text-xs text-gray-500 dark:text-gray-400",children:[b.status>0?"Code ".concat(b.status):"Code inconnu"," \xb7"," ",b.message]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>k(null),className:"rounded-full bg-gray-200 px-5 py-2 text-gray-800 transition hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600",children:"Fermer"}),(0,s.jsx)("button",{onClick:()=>{k(null),r(!0),P(!0)},className:"rounded-full bg-gradient-to-r from-gray-600 to-gray-800 px-5 py-2 font-semibold text-white shadow transition hover:from-gray-700 hover:to-gray-900",children:"Rafra\xeechir la liste"})]})]})})]})},{requireAuth:!1})},2269:(e,t,r)=>{"use strict";var s=r(9509);r(8375);var a=r(2115),n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(a),o=void 0!==s&&s.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,r=t.name,s=void 0===r?"stylesheet":r,a=t.optimizeForSpeed,n=void 0===a?o:a;c(i(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",c("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(i(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var s=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,s))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(s){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var s=this._tags[e];c(s,"old rule at index `"+e+"` not found"),s.textContent=t}return e},r.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(i(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return r?a.insertBefore(s,r):a.appendChild(s),s},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var r=String(t),s=e+r;return u[s]||(u[s]="jsx-"+d(e+"-"+r)),u[s]}function m(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var x=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,s=void 0===r?null:r,a=t.optimizeForSpeed,n=void 0!==a&&a;this._sheet=s||new l({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),s&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),s=r.styleId,a=r.rules;if(s in this._instancesCounts){this._instancesCounts[s]+=1;return}var n=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[s]=n,this._instancesCounts[s]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var s=this._fromServer&&this._fromServer[r];s?(s.parentNode.removeChild(s),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],s=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:s}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,s=e.id;if(r){var a=h(s,r);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return m(a,e)}):[m(a,t)]}}return{styleId:h(s),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),g=a.createContext(null);g.displayName="StyleSheetContext";var f=n.default.useInsertionEffect||n.default.useLayoutEffect,p="undefined"!=typeof window?new x:void 0;function y(e){var t=p||a.useContext(g);return t&&("undefined"==typeof window?t.add(e):f(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}y.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},t.style=y},3646:(e,t,r)=>{Promise.resolve().then(r.bind(r,1760))},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},6414:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var s=r(5647);let a="https://qrowzznnnarfogfbnnow.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFyb3d6em5ubmFyZm9nZmJubm93Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwNjg1MzUsImV4cCI6MjA2NzY0NDUzNX0.MkCeFSLoOyGl-y1_eZTXTXXV8hGOJM7WuBV7gvLc_rI";if(!a)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_URL");if(!n)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_ANON_KEY");let o=(()=>{if(!a)return"default";let e=a.match(/https:\/\/([a-z0-9-]+)\.supabase\.co/);return e?e[1]:"default"})();console.log("Supabase project ref for cookies:",o);let i={auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"sb-".concat(o,"-auth-token"),cookieOptions:{name:"sb-".concat(o,"-auth-token"),path:"/",sameSite:"Lax",secure:!0,maxAge:604800}}};console.log("Supabase client initialized with cookie config:",{cookieName:i.auth.cookieOptions.name,cookiePath:i.auth.cookieOptions.path,detectSessionInUrl:i.auth.detectSessionInUrl,persistSession:i.auth.persistSession});let l=(0,s.UU)(a,n,i);l.auth.getUser().then(()=>{}),l.auth.onAuthStateChange((e,t)=>{console.log("Supabase auth event:",e)}),window.addEventListener("focus",()=>{l.auth.refreshSession().catch(e=>{console.error("Error refreshing Supabase session on focus:",e)})})},7667:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var s=r(5155);function a(e){let{size:t="medium",color:r="blue"}=e;return(0,s.jsx)("div",{className:"\n        ".concat({small:"h-4 w-4 border-2",medium:"h-8 w-8 border-2",large:"h-12 w-12 border-3"}[t],"\n        ").concat({blue:"border-blue-200 border-t-blue-600",white:"border-gray-200/30 border-t-white"}[r],"\n        animate-spin rounded-full border-solid\n      "),role:"status","aria-label":"Chargement",children:(0,s.jsx)("span",{className:"sr-only",children:"Chargement..."})})}},8375:()=>{},9137:(e,t,r)=>{"use strict";e.exports=r(2269).style}},e=>{var t=t=>e(e.s=t);e.O(0,[5647,6874,6766,4704,8441,1684,7358],()=>t(3646)),_N_E=e.O()}]);