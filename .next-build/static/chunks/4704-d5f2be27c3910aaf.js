"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4704],{970:(e,t,r)=>{r.d(t,{r:()=>s});var a=r(5155),i=r(20);let c=()=>(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary-600 border-t-transparent"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),o=()=>(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"mb-4 text-2xl font-bold",children:"Access Denied"}),(0,a.jsx)("p",{className:"mb-6 text-gray-600",children:"You need to be signed in to access this page."}),(0,a.jsx)("a",{href:"/signin",className:"inline-flex h-10 items-center justify-center rounded-md bg-primary-600 px-4 font-medium text-white transition-colors hover:bg-primary-700",children:"Sign In"})]})});function s(e){let{requiredRole:t,requireAuth:r=!0,loadingComponent:s=(0,a.jsx)(c,{}),unauthorizedComponent:n=(0,a.jsx)(o,{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(c){let{user:o,loading:d,checkPermission:l}=(0,i.As)();return d?s:r&&!o||t&&!l(t)?n:(0,a.jsx)(e,{...c})}}},1393:(e,t,r)=>{r.d(t,{NJ:()=>o,Ox:()=>d,W9:()=>n,YG:()=>s,bW:()=>c});var a=r(6414);function i(e,t){if(console.error("Error while trying to ".concat(t,":"),e),e instanceof Error&&"Request timed out"===e.message)throw Error("Taking longer than expected to ".concat(t,". Please check your connection and try again."));throw e}async function c(){try{let{data:e,error:t}=await a.N.from("courses").select("categorie").not("categorie","is",null);if(t)throw t;if(!e)return[];let r=e.reduce((e,t)=>(t.categorie&&(e[t.categorie]=(e[t.categorie]||0)+1),e),{});return Object.entries(r).map(e=>{let[t,r]=e;return{categorie:t,count:r}})}catch(e){i(e,"load categories")}}async function o(e){try{let{query:t="",creator_id:r,category:i,sort_by:c="created_at",sort_order:o="desc",page:s=1,limit:n=10}=e||{},d=(s-1)*n,l=a.N.from("courses").select("*, users!creator_id(name, photo_url, bio)");t&&(l=l.ilike("title","%".concat(t,"%"))),r&&(l=l.eq("creator_id",r)),i&&(l=l.eq("categorie",i)),l=l.order(c,{ascending:"asc"===o}).range(d,d+n-1);let{data:u,error:m}=await l;if(m)throw m;if(!u)return[];return u.map(e=>({...e,creator:e.users}))}catch(e){i(e,"load courses")}}async function s(e){try{let{data:t,error:r}=await a.N.from("courses").select("*, users!creator_id(id, name, email, photo_url, role, bio)").eq("id",e).single();if(r)throw r;if(!t)return null;let{count:i}=await a.N.from("sections").select("*",{count:"exact",head:!0}).eq("course_id",e);return{...t,creator:t.users,section_count:i||0}}catch(t){console.error("Error fetching course with ID ".concat(e,":"),t),i(t,"load course")}}async function n(e){try{let{data:t,error:r}=await a.N.from("sections").select("*").eq("course_id",e).order("section_number",{ascending:!0});if(r)throw r;if(!t)return[];return t.map(e=>({id:e.id,course_id:e.course_id,section_number:e.section_number,title:e.title,duration:e.duration,playback_id:e.playback_id,chapters:e.chapters?Array.isArray(e.chapters)?e.chapters:JSON.parse(e.chapters):[],questions:e.questions?Array.isArray(e.questions)?e.questions:JSON.parse(e.questions):[],created_at:e.created_at}))}catch(t){console.error("Error fetching sections for course ".concat(e,":"),t),i(t,"load course sections")}}async function d(e){try{let{data:t,error:r}=await a.N.from("sections").select("*").eq("id",e).single();if(r)throw r;if(!t)return null;return{id:t.id,course_id:t.course_id,section_number:t.section_number,title:t.title,duration:t.duration,playback_id:t.playback_id,chapters:t.chapters?Array.isArray(t.chapters)?t.chapters:JSON.parse(t.chapters):[],questions:t.questions?Array.isArray(t.questions)?t.questions:JSON.parse(t.questions):[],created_at:t.created_at}}catch(t){console.error("Error fetching section with ID ".concat(e,":"),t),i(t,"load section")}}},8183:(e,t,r)=>{r.d(t,{bW:()=>c.bW,YG:()=>c.YG,NJ:()=>c.NJ,jy:()=>a,JT:()=>n,ND:()=>i.N});var a={};r.r(a),r.d(a,{b_:()=>s});var i=r(6414),c=r(1393);let o=[{id:"1",role:"admin",name:"Admin User",email:"admin@example.com",photo_url:"https://i.pravatar.cc/150?u=admin@example.com",created_at:"2023-01-01T00:00:00Z"},{id:"2",role:"teacher",name:"Jane Smith",email:"jane@example.com",photo_url:"https://i.pravatar.cc/150?u=jane@example.com",created_at:"2023-01-02T00:00:00Z"},{id:"3",role:"teacher",name:"John Doe",email:"john@example.com",photo_url:"https://i.pravatar.cc/150?u=john@example.com",created_at:"2023-01-03T00:00:00Z"},{id:"4",role:"student",name:"Student User",email:"student@example.com",photo_url:"https://i.pravatar.cc/150?u=student@example.com",created_at:"2023-01-04T00:00:00Z"}],s=[{id:"1",title:"Grammaire fran\xe7aise avanc\xe9e",description:"Ma\xeetrisez les r\xe8gles de grammaire fran\xe7aise avec des exercices pratiques.",thumbnail_url:"https://images.unsplash.com/photo-1517694712202-14dd9538aa97",categorie:"Fran\xe7ais",creator_id:"2",created_at:"2023-02-01T00:00:00Z",creator:o.find(e=>"2"===e.id),section_count:3},{id:"2",title:"Orthographe et conjugaison",description:"Perfectionnez votre orthographe et ma\xeetrisez les temps de conjugaison.",thumbnail_url:"https://images.unsplash.com/photo-1633356122102-3fe601e05bd2",categorie:"Fran\xe7ais",creator_id:"2",created_at:"2023-02-15T00:00:00Z",creator:o.find(e=>"2"===e.id),section_count:4},{id:"3",title:"Math\xe9matiques 6e ann\xe9e",description:"Fractions, d\xe9cimaux, g\xe9om\xe9trie et r\xe9solution de probl\xe8mes.",thumbnail_url:"https://images.unsplash.com/photo-1618477247222-acbdb0e159b3",categorie:"Math\xe9matiques",creator_id:"3",created_at:"2023-03-01T00:00:00Z",creator:o.find(e=>"3"===e.id),section_count:5},{id:"4",title:"Sciences de la nature",description:"D\xe9couverte du vivant, de la mati\xe8re et des ph\xe9nom\xe8nes naturels.",thumbnail_url:"https://images.unsplash.com/photo-1526379095098-d400fd0bf935",categorie:"Science et technologie",creator_id:"3",created_at:"2023-03-15T00:00:00Z",creator:o.find(e=>"3"===e.id),section_count:4},{id:"5",title:"Histoire du Qu\xe9bec",description:"D\xe9couvrez l'histoire fascinante du Qu\xe9bec, de la Nouvelle-France \xe0 aujourd'hui.",thumbnail_url:"https://images.unsplash.com/photo-1593720213428-28a5b9e94613",categorie:"G\xe9ographie et histoire",creator_id:"2",created_at:"2023-04-01T00:00:00Z",creator:o.find(e=>"2"===e.id),section_count:6}],n=()=>!1}}]);